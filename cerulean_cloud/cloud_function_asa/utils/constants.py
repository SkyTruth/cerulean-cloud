"""Constants for Automatic Source Association handler"""

# TEMPORAL PARAMETERS FOR AIS
HOURS_BEFORE = 8  # hours
HOURS_AFTER = 6  # hours
TIMESTEPS_PER_HOUR = 60
NUM_TIMESTEPS = (HOURS_BEFORE + HOURS_AFTER) * TIMESTEPS_PER_HOUR + 1

T_FORMAT = "%Y-%m-%d %H:%M:%S"

# BUFFERING PARAMETERS FOR AIS
AIS_PROJECT_ID = "world-fishing-827"
MAX_SLICK_DRIFT_TIME = 3  # hours
SPREAD_RATE = 2000  # meters/hr perpendicular to vessel track
AIS_SCENE_BUFFER = 10000  # buffer around GRD envelope to capture AIS
AIS_SLICK_BUFFER = SPREAD_RATE * MAX_SLICK_DRIFT_TIME

# PARAMETERS FOR INFRASTRUCTURE
INFRA_CLOSING_BUFFER = 500  # meters
INFRA_NUM_VERTICES = 10
INFRA_CUTOFF_RADIUS = 3000  # meters
INFRA_DECAY_RADIUS = 1500  # meters
INFRA_DECAY_THETA = 0.5
MIN_AREA_THRESHOLD = 0.1


# PARAMETERS FOR DARK VESSEL
DARK_CLOSING_BUFFER = 500  # meters
DARK_NUM_VERTICES = 2
DARK_CUTOFF_RADIUS = 50000  # meters
# decay radius and decay theta are sourced from cerulean-cloud/notebooks/dark_finetuning_2025-03-31.ipynb
DARK_DECAY_RADIUS = 19200  # meters
DARK_DECAY_THETA = 6.4

# WEIGHTING PARAMETERS FOR AIS
W_TEMPORAL = 1.0
W_PROXIMITY = 2.0
W_PARITY = 1.0
AIS_REF_TIME_OVER = 600.0  # Seconds
AIS_REF_TIME_UNDER = 10000.0  # Seconds
SHARPNESS_PARITY = 5.77  # 4/ln(2) calculated to make a 45ยบ angle have a score of 0.5 decrease to be more lenient
SHARPNESS_PROX = 5
SHARPNESS_TEMP = 2
GRACE_DISTANCE = 500  # Meters, for slick heads near vessel at image time

# COLLATION PARAMETERS
# https://skytruth.atlassian.net/browse/TECH-2674
# Calculated based on version <TAG>
VESSEL_MEAN, VESSEL_STD = 0.8638278169739846, 0.2276232441365998
INFRA_MEAN, INFRA_STD = 0.13924050632911392, 0.8481012658227848
DARK_MEAN, DARK_STD = 0.4050632911392405, 0.9620253164556962
NATURAL_MEAN, NATURAL_STD = 0.0, 1.0  # Placeholder
